% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute.R
\name{compute}
\alias{compute}
\title{Compute New Variables by Aggregating Multiple Columns}
\usage{
compute(.data, ..., .method = mean, .na.rm = FALSE)
}
\arguments{
\item{.data}{A data frame or tibble containing the source variables.}

\item{...}{Named arguments defining new variables to create. The value of each
argument should be a selection of columns using:
\itemize{
  \item \strong{Standard Tidyselect:} \code{var1:var5}, \code{starts_with("item")}, \code{c(var1, var2)}.
  \item \strong{Pattern Helper:} \code{pattern("item{i}", 1:5)} for constructing names dynamically.
}}

\item{.method}{The aggregation function to apply (e.g., \code{mean}, \code{sum}).
Defaults to \code{mean}.}

\item{.na.rm}{Logical. Should missing values be removed during aggregation?
Defaults to \code{FALSE}.}
}
\value{
A data frame identical to \code{.data} with the new computed variables appended.
}
\description{
Creates new variables by applying aggregation functions (e.g., \code{mean}, \code{sum})
to multiple columns. It leverages \code{tidyselect} syntax for flexible variable
selection, including ranges, specific names, and a custom \code{pattern()} helper.
}
\details{
\strong{Variable Selection:}
This function supports full \code{dplyr}-style selection. You can use:
\itemize{
  \item \code{item1:item5} (ranges)
  \item \code{c(item1, item3, item5)} (specific columns)
  \item \code{starts_with("A")}, \code{contains("scale")} (helpers)
  \item \code{pattern("Q{i}_rev", 1:5)} (custom pattern helper)
}

\strong{Performance Optimization:}
If \code{.method} is set to \code{mean} or \code{sum}, the function automatically
switches to the highly optimized \code{rowMeans()} or \code{rowSums()} base R functions.
For other functions (e.g., \code{sd}, \code{median}), it falls back to \code{apply()},
which may be slower on large datasets.

\strong{Error Handling:}
\itemize{
  \item If a selection matches no columns, the new variable is created and filled with \code{NA},
  and a warning is issued.
  \item If non-numeric columns are selected, an error will occur during computation.
}
}
\examples{
library(dplyr)

# Create sample data
df <- data.frame(
  id = 1:5,
  A1 = c(1, 2, 3, 4, 5),
  A2 = c(2, 2, 3, 4, 4),
  A3 = c(1, 1, 1, 1, 1),
  B_1 = c(5, 4, 3, 2, 1),
  B_2 = c(5, 5, 4, 4, 3),
  chk_1 = c(1, 0, 1, 0, 1),
  chk_2 = c(0, 1, 0, 1, 0)
)

# 1. Basic Range Selection (Standard Tidyselect)
result <- df \%>\%
  compute(
    scale_A = A1:A3,
    .method = mean
  )

# 2. Using the pattern() helper for complex names
result <- df \%>\%
  compute(
    scale_B = pattern("B_{i}", 1:2),
    .method = sum
  )

# 3. Combining methods + na.rm
result <- df \%>\%
  compute(
    scale_A = A1:A3,
    scale_B = pattern("B_{i}", 1:2),
    check_score = starts_with("chk"),
    .method = mean,
    .na.rm = TRUE
  )
}
