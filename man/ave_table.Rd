% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ave_table.R
\name{ave_table}
\alias{ave_table}
\title{Create an AVE and CR table with factor correlations (convergent and discriminant validity)}
\usage{
ave_table(
  data,
  model,
  digits_stat = 3,
  digits_corr = 3,
  show_stars = TRUE,
  ...
)
}
\arguments{
\item{data}{A \code{data.frame} (or tibble) containing observed indicators used in \code{model}.}

\item{model}{A lavaan model string specifying the measurement model (for example, \code{F1 =~ x1 + x2 + x3}).}

\item{digits_stat}{Integer, number of digits for CR, AVE, and \eqn{\sqrt{AVE}} on the diagonal.}

\item{digits_corr}{Integer, number of digits for factor correlations.}

\item{show_stars}{Logical, whether to append significance stars to correlations based on p values.}

\item{...}{Additional arguments passed to \code{lavaan::cfa()}, such as \code{estimator},
\code{missing}, \code{std.lv}, \code{ordered}, and \code{parameterization}.}
}
\value{
A \code{data.frame} with columns \code{Domain}, \code{CR}, \code{AVE}, and numeric
  index columns \code{1..k} for the correlation matrix, where \code{k} is the number of factors.
}
\description{
Fits a CFA model using \pkg{lavaan} and returns a validity table containing
Composite Reliability (CR), Average Variance Extracted (AVE), and the latent
factor correlation matrix with \eqn{\sqrt{AVE}} on the diagonal.
}
\details{
The returned table is commonly used to evaluate:
\itemize{
  \item Convergent validity via AVE (often AVE >= .50) and CR (often CR >= .70).
  \item Discriminant validity via the Fornell Larcker criterion, where
    \eqn{\sqrt{AVE}} for each factor is expected to exceed its correlations with other factors.
}

All numeric entries are formatted in APA style by removing the leading zero
when \eqn{|x| < 1} (for example, \code{.810}, \code{.436***}, \code{-.215}).


CR and AVE are computed from the standardized solution (\code{std.all}).
For a given factor with standardized loadings \eqn{\lambda_i} and indicator residual variances \eqn{\theta_i}:
\deqn{CR = \frac{(\sum \lambda_i)^2}{(\sum \lambda_i)^2 + \sum \theta_i}}
\deqn{AVE = \frac{\sum \lambda_i^2}{\sum \lambda_i^2 + \sum \theta_i}}

If an item residual variance is not available in the standardized solution, it will be treated as \code{NA}
and CR and AVE for that factor will become \code{NA}.
}
\examples{
if (requireNamespace("lavaan", quietly = TRUE)) {
  set.seed(123)
  model_pop <- '
    F1 =~ 0.8*x1 + 0.7*x2 + 0.6*x3
    F2 =~ 0.8*y1 + 0.7*y2 + 0.6*y3
    F1 ~~ 0.4*F2
  '
  dat <- lavaan::simulateData(model_pop, sample.nobs = 300)

  model_fit <- '
    F1 =~ x1 + x2 + x3
    F2 =~ y1 + y2 + y3
  '

  ave_table(dat, model_fit, digits_stat = 3, digits_corr = 3)
}

}
